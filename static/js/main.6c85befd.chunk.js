(this.webpackJsonpmanual=this.webpackJsonpmanual||[]).push([[0],{12:function(e,t,n){e.exports=n.p+"static/media/ding.627689c6.mp3"},16:function(e,t,n){e.exports=n(50)},48:function(e,t,n){},49:function(e,t,n){},50:function(e,t,n){"use strict";n.r(t);var a=n(1),i=n(0),s=n.n(i),o=n(3),c=n.n(o),r=n(14),u=n(9),l=n(10),h=n(11),p=n(5),m=n(15),v=n(13),d=(n(48),n(12)),f=n.n(d),w=a.a.View.Combo,g=a.a.View.Icon,y=a.a.View.Input,C=function(e){Object(m.a)(n,e);var t=Object(v.a)(n);function n(){var e;Object(l.a)(this,n);for(var i=arguments.length,o=new Array(i),c=0;c<i;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).refAudio=s.a.createRef(),e.time=0,e.interval=0,e.sounds=[],e.voices={},e.state={exercicesCount:"5",exercicesDuration:"30",repetitionsCount:"3",pauseBetweenRepetitions:"60",voice:"",play:!1,remainingTime:""},e.handleVoiceChange=function(t){e.setState({voice:t}),e.voices[t]&&e.speak("Vous aimez ma voix ?")},e.handleStart=function(){e.sounds=[];for(var t=a.a.Converter.Integer(e.state.exercicesCount,0),n=a.a.Converter.Integer(e.state.exercicesDuration,0),i=a.a.Converter.Integer(e.state.repetitionsCount,0),s=a.a.Converter.Integer(e.state.pauseBetweenRepetitions,0),o=0,c=0;c<i;c++){if(c>0){for(var r=1;r<=Math.min(5,s-5);r++)e.sounds.push({time:o-r,speech:"#".concat(r)});e.sounds.push({time:o,speech:"Pause de ".concat(s," secondes.")}),o+=s}for(var l=0;l<t;l++){if(c>0||l>0)for(var h=1;h<=Math.min(5,n-5);h++)e.sounds.push({time:o-h,speech:"#".concat(h)});e.sounds.push({time:o,speech:"Exercice ".concat(l+1," sur ").concat(t)}),o+=n}}for(var p=1;p<=Math.min(5,n-5);p++)e.sounds.push({time:o-p,speech:"#".concat(p)});e.sounds.push({time:o,speech:"Bravo ! Cette session est termin\xe9e."}),e.sounds.sort((function(e,t){return e.time-t.time}));var m,v=Object(u.a)(e.sounds);try{for(v.s();!(m=v.n()).done;){var d=m.value;console.log(d.time,d.speech)}}catch(f){v.e(f)}finally{v.f()}e.time=Date.now(),e.interval=window.setInterval(e.checkTime,40),e.setState({play:!0})},e.handleStop=function(){e.sounds=[],window.clearInterval(e.interval),e.interval=0,e.setState({play:!1},(function(){return e.speak("Cette session vient d'\xeatre annul\xe9e.")}))},e.checkTime=function(){var t=.001*(Date.now()-e.time),n=Object(p.a)(e).sounds;if(n.length<1)e.setState({play:!1});else{var a=n[0];a.time>t||(n.shift(),e.speak(a.speech))}},e}return Object(h.a)(n,[{key:"componentDidMount",value:function(){var e=this;"speechSynthesis"in window?(console.info("window.speechSynthesis=",window.speechSynthesis),window.speechSynthesis.getVoices().filter((function(e){return e.lang.startsWith("fr")})).forEach((function(t){e.voices[t.name]=t})),this.setState({voice:Object.keys(this.voices)[0]}),window.setTimeout((function(){return e.speak("#Bienvenue \xe0 la pri\xe8re au soleil!")}),1e3)):a.a.Factory.Dialog.error("No speech synthesis on this device!")}},{key:"speak",value:function(e){var t=this;if(console.log("speak:",e),"#"===e.charAt(0)){var n=new SpeechSynthesisUtterance(e.substr(1)),a=this.voices[this.state.voice];return a&&(n.voice=a),n.pitch=1.5,n.rate=1.1,void window.speechSynthesis.speak(n)}var i=this.refAudio.current;i&&i.play(),window.setTimeout((function(){var n=new SpeechSynthesisUtterance(e),a=t.voices[t.state.voice];a&&(n.voice=a),n.pitch=.9,n.rate=1.2,window.speechSynthesis.speak(n)}),1e3)}},{key:"render",value:function(){var e=this,t=["App","thm-bg0"].concat(Object(r.a)(a.a.Converter.StringArray(this.props.className,[]))),n=Object.keys(this.voices);return console.info("voices=",n),s.a.createElement("div",{className:t.join(" ")},s.a.createElement("header",{className:"thm-bgP thm-ele-bar"},s.a.createElement("div",null,"version 0.1.0"),s.a.createElement("div",null,this.state.remainingTime)),s.a.createElement("div",{className:"input"},n.length>0&&s.a.createElement(w,{wide:!0,label:"Coach's voice",value:this.state.voice,onChange:this.handleVoiceChange},n.map((function(e){return s.a.createElement("div",{key:e},e)}))),s.a.createElement("div",{className:"input"},s.a.createElement(y,{wide:!0,label:"Exercices Count",storage:"exercicesCount",value:this.state.exercicesCount,onChange:function(t){return e.setState({exercicesCount:t})}}),s.a.createElement(y,{wide:!0,label:"Exercices Duration",storage:"exercicesDuration",value:this.state.exercicesDuration,onChange:function(t){return e.setState({exercicesDuration:t})}})),s.a.createElement("div",{className:"input"},s.a.createElement(y,{wide:!0,label:"Repetitions Count",storage:"repetitionsCount",value:this.state.repetitionsCount,onChange:function(t){return e.setState({repetitionsCount:t})}}),s.a.createElement(y,{wide:!0,label:"Pause Duration",storage:"pauseBetweenRepetitions",value:this.state.pauseBetweenRepetitions,onChange:function(t){return e.setState({pauseBetweenRepetitions:t})}}))),s.a.createElement("div",{className:"play"},!this.state.play&&s.a.createElement("button",{className:"button thm-bgP thm-ele-nav",onClick:this.handleStart},s.a.createElement(g,{content:"play",size:"30vmin"})),this.state.play&&s.a.createElement("button",{className:"button thm-bgS thm-ele-nav",onClick:this.handleStop},s.a.createElement(g,{content:"pause",size:"30vmin"}))),s.a.createElement("audio",{src:f.a,ref:this.refAudio}))}}]),n}(s.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(49);a.a.Theme.register("chronos",{bg0:"#cec",bg3:"#fff",bgP:"#2ca600",bgS:"#f86"}),a.a.Theme.apply("chronos"),c.a.render(s.a.createElement(C,null),document.getElementById("root"));var b=document.getElementById("tp-logo");b&&(b.classList.add("vanish"),window.setTimeout((function(){var e;null===(e=b.parentNode)||void 0===e||e.removeChild(b)}),1e3)),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[16,1,2]]]);
//# sourceMappingURL=main.6c85befd.chunk.js.map