(this.webpackJsonpChronos=this.webpackJsonpChronos||[]).push([[0],{15:function(e,t,s){e.exports=s.p+"static/media/ding.627689c6.mp3"},19:function(e,t,s){e.exports=s(54)},52:function(e,t,s){},53:function(e,t,s){},54:function(e,t,s){"use strict";s.r(t);var n=s(1),a=s(0),r=s.n(a),o=s(3),i=s.n(o),c=s(17),l=s(7),p=s(12),u=s(13),d=s(5),h=s(18),m=s(16),v=s(8),f=s.n(v),w=s(14),b={lockScreen:function(){return k.apply(this,arguments)},unlockScreen:function(){if(!g)return console.warn("No wakeLock feature on this device!"),!1;return!!y.wakelock&&(y.wakelock.release(),y.wakelock=void 0,!0)}},g="wakeLock"in navigator?navigator.wakeLock:null,y={};function k(){return(k=Object(w.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(g){e.next=3;break}return console.warn("No wakeLock feature on this device!"),e.abrupt("return",!1);case 3:return e.prev=3,e.next=6,g.request("screen");case 6:return t=e.sent,console.info("wakelock=",t),y.wakelock=t,e.abrupt("return",!0);case 12:return e.prev=12,e.t0=e.catch(3),console.error("Error while trying to lock the screen: ",e.t0),e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[3,12]])})))).apply(this,arguments)}var j=s(9),x=(s(52),s(15)),C=s.n(x),S="".concat(j.name," v").concat(j.version),E=n.a.View.Icon,D=n.a.View.Input,T=function(e){Object(h.a)(s,e);var t=Object(m.a)(s);function s(){var e;Object(p.a)(this,s);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).refAudio=r.a.createRef(),e.time=0,e.interval=0,e.sounds=[],e.voices={},e.state={exercicesCount:"5",exercicesDuration:"30",repetitionsCount:"3",pauseBetweenRepetitions:"60",voice:"",play:!1,remainingTime:""},e.handleVoiceChange=function(t){e.setState({voice:t}),e.voices[t]&&e.speak("Vous aimez ma voix ?")},e.handleStart=function(){b.lockScreen(),e.sounds=[];for(var t=n.a.Converter.Integer(e.state.exercicesCount,0),s=n.a.Converter.Integer(e.state.exercicesDuration,0),a=n.a.Converter.Integer(e.state.repetitionsCount,0),r=n.a.Converter.Integer(e.state.pauseBetweenRepetitions,0),o=0,i=0;i<a;i++){if(i>0){for(var c=1;c<=Math.min(5,r-5);c++)e.sounds.push({time:o-c,speech:"#".concat(c)});e.sounds.push({time:o,speech:"Pause de ".concat(r," secondes.")}),o+=r}for(var p=0;p<t;p++){if(i>0||p>0)for(var u=1;u<=Math.min(5,s-5);u++)e.sounds.push({time:o-u,speech:"#".concat(u)});e.sounds.push({time:o,speech:"Exercice ".concat(p+1," sur ").concat(t)}),o+=s}}for(var d=1;d<=Math.min(5,s-5);d++)e.sounds.push({time:o-d,speech:"#".concat(d)});e.sounds.push({time:o,speech:"Bravo ! Cette session est termin\xe9e."}),e.sounds.sort((function(e,t){return e.time-t.time}));var h,m=Object(l.a)(e.sounds);try{for(m.s();!(h=m.n()).done;){var v=h.value;console.log(v.time,v.speech)}}catch(f){m.e(f)}finally{m.f()}e.time=Date.now(),e.interval=window.setInterval(e.checkTime,40),e.setState({play:!0})},e.handleStop=function(){b.unlockScreen(),e.sounds=[],window.clearInterval(e.interval),e.interval=0,e.setState({play:!1},(function(){return e.speak("Cette session vient d'\xeatre annul\xe9e.")}))},e.checkTime=function(){var t=.001*(Date.now()-e.time),s=Object(d.a)(e).sounds;if(s.length<1)e.setState({play:!1});else{var n,a=Object(l.a)(s);try{for(a.s();!(n=a.n()).done;){var r=n.value;if("#"!==r.speech.charAt(0)){var o=Math.ceil(r.time-t),i="".concat(o>0?o:"");i!==e.state.remainingTime&&e.setState({remainingTime:i});break}}}catch(p){a.e(p)}finally{a.f()}var c=s[0];c.time>t||(s.shift(),e.speak(c.speech))}},e}return Object(u.a)(s,[{key:"componentDidMount",value:function(){var e=this;"speechSynthesis"in window?(console.info("window.speechSynthesis=",window.speechSynthesis),window.speechSynthesis.getVoices().filter((function(e){return e.lang.startsWith("fr")})).forEach((function(t){e.voices[t.name]=t})),this.setState({voice:Object.keys(this.voices)[0]}),window.setTimeout((function(){return e.speak("#Bienvenue \xe0 la pri\xe8re au soleil!")}),1e3)):n.a.Factory.Dialog.error("No speech synthesis on this device!")}},{key:"speak",value:function(e){var t=this;if(console.log("speak:",e),"#"===e.charAt(0)){var s=new SpeechSynthesisUtterance(e.substr(1)),n=this.voices[this.state.voice];return n&&(s.voice=n),s.pitch=1.5,s.rate=1.1,void window.speechSynthesis.speak(s)}var a=this.refAudio.current;a&&a.play(),window.setTimeout((function(){var s=new SpeechSynthesisUtterance(e),n=t.voices[t.state.voice];n&&(s.voice=n),s.pitch=.9,s.rate=1.2,window.speechSynthesis.speak(s)}),1e3)}},{key:"render",value:function(){var e=this,t=["App","thm-bg0"].concat(Object(c.a)(n.a.Converter.StringArray(this.props.className,[])));return r.a.createElement("div",{className:t.join(" ")},r.a.createElement("header",{className:"thm-bgP thm-ele-bar"},r.a.createElement("div",null,S),r.a.createElement("div",null,this.state.remainingTime)),r.a.createElement("div",{className:"input"},r.a.createElement("div",{className:"input"},r.a.createElement(D,{wide:!0,label:"Exercices Count",storage:"exercicesCount",value:this.state.exercicesCount,onChange:function(t){return e.setState({exercicesCount:t})}}),r.a.createElement(D,{wide:!0,label:"Exercices Duration",storage:"exercicesDuration",value:this.state.exercicesDuration,onChange:function(t){return e.setState({exercicesDuration:t})}})),r.a.createElement("div",{className:"input"},r.a.createElement(D,{wide:!0,label:"Repetitions Count",storage:"repetitionsCount",value:this.state.repetitionsCount,onChange:function(t){return e.setState({repetitionsCount:t})}}),r.a.createElement(D,{wide:!0,label:"Pause Duration",storage:"pauseBetweenRepetitions",value:this.state.pauseBetweenRepetitions,onChange:function(t){return e.setState({pauseBetweenRepetitions:t})}}))),r.a.createElement("div",{className:"play"},!this.state.play&&r.a.createElement("button",{className:"button thm-bgP thm-ele-nav",onClick:this.handleStart},r.a.createElement(E,{content:"play",size:"30vmin"})),this.state.play&&r.a.createElement("button",{className:"button thm-bgS thm-ele-nav",onClick:this.handleStop},r.a.createElement(E,{content:"pause",size:"30vmin"}))),r.a.createElement("audio",{src:C.a,ref:this.refAudio}))}}]),s}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s(53);n.a.Theme.register("chronos",{bg0:"#cec",bg3:"#fff",bgP:"#2ca600",bgS:"#f86"}),n.a.Theme.apply("chronos"),i.a.render(r.a.createElement(T,null),document.getElementById("root"));var N=document.getElementById("tp-logo");N&&(N.classList.add("vanish"),window.setTimeout((function(){var e;null===(e=N.parentNode)||void 0===e||e.removeChild(N)}),1e3)),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},9:function(e){e.exports=JSON.parse('{"name":"Chronos","version":"0.4.1","private":true,"proxy":"http://localhost:7474/TP","homepage":"./","dependencies":{"@babel/core":"7.9.0","@svgr/webpack":"4.3.3","@testing-library/jest-dom":"^4.2.4","@testing-library/react":"^9.3.2","@testing-library/user-event":"^7.1.2","@types/jest":"^24.0.0","@types/node":"^12.0.0","@typescript-eslint/eslint-plugin":"^2.10.0","@typescript-eslint/parser":"^2.10.0","babel-eslint":"10.1.0","babel-jest":"^24.9.0","babel-loader":"8.1.0","babel-plugin-named-asset-import":"^0.3.6","babel-preset-react-app":"^9.1.2","camelcase":"^5.3.1","case-sensitive-paths-webpack-plugin":"2.3.0","comlink":"^4.2.0","css-loader":"3.4.2","dotenv":"8.2.0","dotenv-expand":"5.1.0","eslint":"^6.6.0","eslint-config-react-app":"^5.2.1","eslint-loader":"3.0.3","eslint-plugin-flowtype":"4.6.0","eslint-plugin-import":"2.20.1","eslint-plugin-jsx-a11y":"6.2.3","eslint-plugin-react":"7.19.0","eslint-plugin-react-hooks":"^1.6.1","file-loader":"4.3.0","fs-extra":"^8.1.0","html-webpack-plugin":"4.0.0-beta.11","identity-obj-proxy":"3.0.0","jest":"24.9.0","jest-environment-jsdom-fourteen":"1.0.1","jest-resolve":"24.9.0","jest-watch-typeahead":"0.4.2","mini-css-extract-plugin":"0.9.0","optimize-css-assets-webpack-plugin":"5.0.3","pnp-webpack-plugin":"1.6.4","postcss-flexbugs-fixes":"4.1.0","postcss-loader":"3.0.0","postcss-normalize":"8.0.1","postcss-preset-env":"6.7.0","postcss-safe-parser":"4.0.1","react":"^16.13.1","react-app-polyfill":"^1.0.6","react-dev-utils":"^10.2.1","react-dom":"^16.13.1","react-redux":"^7.2.0","resolve":"1.15.0","resolve-url-loader":"3.1.1","sass-loader":"8.0.2","semver":"6.3.0","style-loader":"0.23.1","terser-webpack-plugin":"2.3.5","tfw":"^0.12.0","ts-pnp":"1.1.6","typescript":"~3.7.2","url-loader":"2.3.0","webpack":"4.42.0","webpack-dev-server":"3.10.3","webpack-manifest-plugin":"2.2.0","workbox-webpack-plugin":"4.3.1","worker-plugin":"^4.0.2"},"scripts":{"deploy":"npm run build && gh-pages -d build","start":"PORT=7001 node scripts/start.js","prebuild":"cp ./package.json src/config.json","build":"node scripts/build.js","test":"node scripts/test.js"},"eslintConfig":{"extends":"react-app"},"browserslist":{"production":[">0.2%","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]},"devDependencies":{"@types/react":"^16.9.34","@types/react-dom":"^16.9.6","@types/react-redux":"^7.1.7","redux-devtools":"^3.5.0"},"jest":{"roots":["<rootDir>/src"],"collectCoverageFrom":["src/**/*.{js,jsx,ts,tsx}","!src/**/*.d.ts"],"setupFiles":["react-app-polyfill/jsdom"],"setupFilesAfterEnv":["<rootDir>/src/setupTests.ts"],"testMatch":["<rootDir>/src/**/__tests__/**/*.{js,jsx,ts,tsx}","<rootDir>/src/**/*.{spec,test}.{js,jsx,ts,tsx}"],"testEnvironment":"jest-environment-jsdom-fourteen","transform":{"^.+\\\\.(js|jsx|ts|tsx)$":"<rootDir>/node_modules/babel-jest","^.+\\\\.css$":"<rootDir>/config/jest/cssTransform.js","^(?!.*\\\\.(js|jsx|ts|tsx|css|json)$)":"<rootDir>/config/jest/fileTransform.js"},"transformIgnorePatterns":["[/\\\\\\\\]node_modules[/\\\\\\\\].+\\\\.(js|jsx|ts|tsx)$","^.+\\\\.module\\\\.(css|sass|scss)$"],"modulePaths":[],"moduleNameMapper":{"^react-native$":"react-native-web","^.+\\\\.module\\\\.(css|sass|scss)$":"identity-obj-proxy"},"moduleFileExtensions":["web.js","js","web.ts","ts","web.tsx","tsx","json","web.jsx","jsx","node"],"watchPlugins":["jest-watch-typeahead/filename","jest-watch-typeahead/testname"]},"babel":{"presets":["react-app"]}}')}},[[19,1,2]]]);
//# sourceMappingURL=main.9cecd446.chunk.js.map